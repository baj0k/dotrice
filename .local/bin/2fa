#!/bin/sh

password=$(/usr/bin/find "${PASSWORD_STORE_DIR:?}" -name '*.gpg' -exec /usr/bin/basename {} .gpg \; | /usr/local/bin/dmenu -i -p "Select OTP:") || exit 0
/usr/bin/pass otp --clip "${password}" && otp=$(/usr/bin/xclip -o -selection c) && /usr/bin/notify-send -t 10000 "${otp}"
