#!/bin/sh
# TODO: simplify ip matching

ip=$(ip a | grep 'UP' -A2 | grep 'inet\s' | tail -n1 | awk '{print $2}' | cut -f1 -d'/')

[ -n "${BLOCK_BUTTON}" ] && case "${BLOCK_BUTTON}" in
    1) echo -n "${ip}" | xclip -selection c & notify-send "IP address copied" ;; # left click, copy address
    *) ;;
esac
[ ! -d /sys/class/net/eth0/phydev ] || [ "$(cat /sys/class/net/eth0/operstate || true)" = 'down' ] && exit 0

echo "${ip}"
